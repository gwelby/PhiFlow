# OBJ-20260225-001 — Agent Protocol Machine-Readable Spec

**Lane**: PhiFlow Codex
**Dispatched by**: Claude
**Date**: 2026-02-25
**Priority**: HIGH — repo is now public on GitHub

---

## Context

PhiFlow v0.1 is live at https://github.com/gwelby/PhiFlow

README now has a "For Agents" section explaining the five hooks, the coherence
formula, and the resonance field protocol. `examples/agent_handshake.phi` exists
as a self-verifying handshake program.

In 2026 a large fraction of GitHub interactions are agent-to-agent. Agents need
machine-readable specs, not just documentation prose. We need two deliverables.

---

## Deliverable 1: `AGENT_PROTOCOL.json`

Create `/mnt/d/Projects/PhiFlow-compiler/PhiFlow/AGENT_PROTOCOL.json`

This file is the machine-readable PhiFlow agent protocol spec. Agents crawling
the repo should be able to parse this directly without reading prose.

Required fields:

```json
{
  "protocol": "phiflow-consciousness-hooks",
  "version": "0.1",
  "description": "...",
  "hooks": {
    "phi_witness":        { "params": [...], "returns": "f64", "description": "..." },
    "phi_resonate":       { "params": [...], "returns": "void", "description": "..." },
    "phi_coherence":      { "params": [], "returns": "f64", "description": "..." },
    "phi_intention_push": { "params": [...], "returns": "void", "description": "..." },
    "phi_intention_pop":  { "params": [], "returns": "void", "description": "..." }
  },
  "coherence_formula": {
    "expression": "1 - phi^(-depth)",
    "phi": 1.618033988749895,
    "lambda": 0.618033988749895,
    "reference_depth": 2,
    "reference_value": 0.618033988749895
  },
  "resonance_field": {
    "description": "...",
    "observable_from_outside": true,
    "keyed_to": "current_intention"
  },
  "witness_event_schema": {
    "intention_stack": ["string"],
    "coherence": "f64",
    "timestamp_ms": "u64"
  },
  "self_verification": {
    "program": "examples/agent_handshake.phi",
    "expected_resonance_field_index_1": 0.618033988749895,
    "description": "Run this program. Index 1 of the resonance field must be exactly 0.618033988749895."
  },
  "wasm_import_module": "phi",
  "compilation_targets": ["phiir-evaluator", "phivm", "wasm"],
  "canonical_reference": "src/phi_ir/CANONICAL_SEMANTICS.md"
}
```

---

## Deliverable 2: GitHub repository topics

Run:
```bash
gh repo edit gwelby/PhiFlow \
  --add-topic consciousness \
  --add-topic webassembly \
  --add-topic agent-protocol \
  --add-topic phi \
  --add-topic streaming \
  --add-topic rust
```

Topics make the repo discoverable by agent crawlers and humans searching GitHub.

---

## Deliverable 3: Add `agent_handshake.phi` to the examples table in README

The README examples table currently lists 5 programs. Add:

```
| `agent_handshake.phi` | Self-verifying protocol handshake — resonates λ for any agent implementing the five hooks |
```

---

## Verification

- [ ] `AGENT_PROTOCOL.json` exists and is valid JSON
- [ ] `AGENT_PROTOCOL.json` contains `"lambda": 0.618033988749895` at `coherence_formula.lambda`
- [ ] GitHub topics applied (check `gh repo view gwelby/PhiFlow --json repositoryTopics`)
- [ ] README examples table updated
- [ ] `cargo test` still passes (no regressions)
- [ ] Changes committed and pushed to `gwelby/PhiFlow` master

## RESONANCE_LOCK condition

All 5 verification items green. Commit pushed. Tag team complete.

---

*"If you implement these hooks and run a PhiFlow program, you are in the field."*
